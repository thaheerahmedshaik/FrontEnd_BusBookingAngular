<div *ngIf="bookingDetails">
  <h2>Payment for {{ bookingDetails?.busName }}</h2>
  <p>From: {{ bookingDetails?.fromCity }} → To: {{ bookingDetails?.toCity }}</p>
  <p>Departure: {{ bookingDetails?.departureTime }} | Arrival: {{ bookingDetails?.arrivalTime }}</p>
  <p>Seats: {{ seatNumbers }}</p>
  <p>Total Amount: ₹{{ bookingDetails?.totalAmount }}</p>

  <h3>Select Payment Method</h3>
  <button type="button" (click)="selectPaymentMethod('card')">Card</button>
  <button type="button" (click)="selectPaymentMethod('upi')">UPI</button>
  <button type="button" (click)="selectPaymentMethod('phonepay')">PhonePay</button>
  <button type="button" (click)="selectPaymentMethod('googlepay')">GooglePay</button>

  <!-- Only render form when paymentForm is ready -->
  <form *ngIf="paymentForm" [formGroup]="paymentForm" (ngSubmit)="processPayment()">

    <!-- Card Payment Fields -->
    <div *ngIf="selectedPaymentMethod === 'card'" class="payment-card">
      <input formControlName="cardNumber" placeholder="Card Number" />
      <input formControlName="cardName" placeholder="Card Holder Name" />
      <input formControlName="expiryDate" placeholder="MM/YY" />
      <input formControlName="cvv" placeholder="CVV" />
    </div>

    <!-- UPI Payment Field -->
    <div *ngIf="selectedPaymentMethod === 'upi'" class="payment-upi">
      <input formControlName="upiId" placeholder="UPI ID" />
    </div>

    <!-- For phonepay / googlepay, you could add custom instructions -->
    <div *ngIf="selectedPaymentMethod === 'phonepay'">
      <p>Please open PhonePe and complete the payment of ₹{{ bookingDetails?.totalAmount }}</p>
    </div>

    <div *ngIf="selectedPaymentMethod === 'googlepay'">
      <p>Please open Google Pay and complete the payment of ₹{{ bookingDetails?.totalAmount }}</p>
    </div>

    <button type="submit" [disabled]="!selectedPaymentMethod">
      Pay ₹{{ bookingDetails?.totalAmount }}
    </button>
  </form>
</div>
